<div class="qr-container">
    <div class="qr-card">
        <div class="header">
            <button type="button" class="back-button" (click)="goBack()">← Back</button>
            <button type="button" class="logout-button" (click)="logout()">Logout</button>
        </div>

        <div class="content">
            @if (paymentStatus() === 'Success') {
                <!-- Payment Completed -->
                <div class="status-success">
                    <div class="status-icon">✓</div>
                    <h1>Payment Successful!</h1>
                    <div class="amount-display">
                        <div class="amount">{{ amount() | number:'1.2-2' }}</div>
                        <div class="currency">{{ currency() }}</div>
                    </div>
                    <div class="status-message">
                        <p>The customer has successfully completed the payment</p>
                    </div>
                    <div class="payment-info">
                        <div class="info-label">Payment ID</div>
                        <div class="info-value payment-id">{{ paymentId() }}</div>
                    </div>
                    <div class="actions">
                        <button type="button" class="primary-button" (click)="newTransaction()">
                            New Transaction
                        </button>
                    </div>
                </div>
            } @else if (paymentStatus() === 'Failed') {
                <!-- Payment Failed -->
                <div class="status-failed">
                    <div class="status-icon">✗</div>
                    <h1>Payment Failed</h1>
                    <div class="amount-display">
                        <div class="amount">{{ amount() | number:'1.2-2' }}</div>
                        <div class="currency">{{ currency() }}</div>
                    </div>
                    <div class="status-message">
                        <p>The payment could not be completed</p>
                    </div>
                    <div class="payment-info">
                        <div class="info-label">Payment ID</div>
                        <div class="info-value payment-id">{{ paymentId() }}</div>
                    </div>
                    <div class="actions">
                        <button type="button" class="primary-button" (click)="newTransaction()">
                            Try Again
                        </button>
                    </div>
                </div>
            } @else if (paymentStatus() === 'Processing') {
                <!-- Payment Processing -->
                <div class="status-processing">
                    <div class="spinner"></div>
                    <h1>Processing Payment</h1>
                    <div class="amount-display">
                        <div class="amount">{{ amount() | number:'1.2-2' }}</div>
                        <div class="currency">{{ currency() }}</div>
                    </div>
                    <div class="status-message">
                        <p>Waiting for customer to confirm payment...</p>
                    </div>
                    <div class="payment-info">
                        <div class="info-label">Payment ID</div>
                        <div class="info-value payment-id">{{ paymentId() }}</div>
                    </div>
                </div>
            } @else {
                <!-- Pending: Show QR Code -->
                <h1>Payment Request</h1>

                <div class="amount-display">
                    <div class="amount">{{ amount() | number:'1.2-2' }}</div>
                    <div class="currency">{{ currency() }}</div>
                </div>

                <div class="qr-code-container">
                    @if (isLoading()) {
                        <div class="loading-spinner">Loading QR code...</div>
                    } @else if (errorMessage()) {
                        <div class="error-message">{{ errorMessage() }}</div>
                    } @else if (qrCodeImageUrl()) {
                        <img [src]="qrCodeImageUrl()" alt="Payment QR Code" class="qr-code-image">
                    }
                </div>

                <div class="instructions">
                    <p>Scan this QR code with the customer's wallet app to process the payment</p>
                </div>

                <div class="payment-info">
                    <div class="info-label">Payment ID</div>
                    <div class="info-value payment-id">{{ paymentId() }}</div>

                    @if (paymentUrl()) {
                        <div class="info-label">Payment URL</div>
                        <div class="info-value payment-url">
                            <a [href]="paymentUrl()" target="_blank">{{ paymentUrl() }}</a>
                        </div>
                    }
                </div>

                <div class="actions">
                    <button type="button" class="secondary-button" (click)="newTransaction()">
                        New Transaction
                    </button>
                </div>
            }
        </div>
    </div>
</div>